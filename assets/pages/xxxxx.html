<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css">
    <style>
            .question-area {
                width: 90%;
                margin: 10px auto;
                /* border: solid 2px; */
                /* border-radius: 10px; */
                padding: 2%;
            }
    
            .form-group {
                float: left;
                margin: 2px;
            }
    
            button {
                clear: both;
                float: left;
            }

        </style>
</head>
<body>
        <div class="question-area">
                <!-- Start of form-div -->
                <form>
                    <!-- BIKE CHOICE -->
                    <div class="form-group">
                        <label for="BIKE_PATH"><i class="fas fa-bicycle fa-2x"></i> Are you biking?</label>
                        <select class="form-control q-bike" id="option1" data-choice-type="BIKE_PATH">
                        <option selected>Choose</option>
                        <option>Yes</option>
                        <option>No</option>
                        </select>
                    </div> <!-- BIKE PATH -->
                    <!-- DOG FRIENDLY CHOICE-->
                    <div class="form-group">
                        <label for="DOG_FRIENDLY"><i class="fas fa-dog fa-2x"></i> Will your dog join you?</label>
                        <select class="form-control q-dog" id="option2" data-choice-type="DOG_FRIENDLY">
                        <option selected>Choose</option>
                        <option>Yes</option>
                        <option>No</option>
                        </select>
                    </div> <!-- DOG FRIENDLY -->
                    <!-- PARKING CHOICE -->
                    <div class="form-group">
                        <label for="PARKING"><i class="fas fa-parking fa-2x"></i> Do you need parking?</label>
                        <select class="form-control q-parking" id="option3" data-choice-type="PARKING">
                        <option selected>Choose</option>
                        <option>Yes</option>
                        <option>No</option>
                        </select>
                    </div> <!-- PARKING -->
                    <!-- RESTROOMS CHOICE -->
                    <div class="form-group">
                        <label for="RESTROOMS"><i class="fas fa-toilet-paper fa-2x"></i> Must have public restrooms?</label>
                        <select class="form-control q-restrooms" id="option4" data-choice-type="RESTROOMS">
                        <option selected>Choose</option>
                        <option>Yes</option>
                        <option>No</option>
                        </select>
                    </div> <!-- RESTROOMS -->

                    <!-- submit button -->
                    <button type="submit" class="btn btn-primary" id="amenities-button">Submit</button>
                </form> <!--form-div -->
            </div> <!-- .question-area-->
            <div class="next"></div>
    <!--____________________________________________________________ -->        
    <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <script>
        

        var queryURL = "https://api.coastal.ca.gov/access/v1/locations";    // California beach location, amenities, photos data

        $.ajax({
            url: queryURL,
            method: "GET"
        })
        .then(function(response) 
        {

            console.log(response);
             // Step 1 - save the user choices
        
            var tmpArr = [];

            // Variable Declarations
            var chooseBike      = 'Yes';    // BIKE_PATH
            var chooseDog       = 'Yes';    // DOG_FRIENDLY
            var chooseParking   = 'Yes';    // PARKING
            var chooseToilet    = 'Yes';    // RESTROOMS

            // Event listener - listens to changes in form
<<<<<<< HEAD
            $('#user-input').submit(event => 
            {
                event.preventDefault();
                const userSelections = $('.form-control'); //grabs raw jquery array of the select tags
                const formattedSelections = []; //empty array to only store user option
                for (let i = 0; i < userSelections.length; i++) 
                { //loops thru jquery array to grab user option for each item
                    const userOption = $(userSelections[i])
                    .find(':selected')
                    .text();
                    formattedSelections.push(userOption);
                }
                console.log(formattedSelections);
            
                //formattedSelections will now hold the user options for each question
                //You can now use this to populate Yes/No responses instead of hard coding it
    
            // Step 2 - Filter results
            /*
                API OBJECTS PROPERTIES
                path    -- response[index].property
                example -- response[0].BIKE_PATH
                BIKE_PATH
                DOG_FRIENDLY
                PARKING
                RESTROOMS
            */
=======
            
            $('.form-group').on('change', function(event){
            event.preventDefault();
              chooseBike      = $('#option1').val();		// Hold answer to option1	
            chooseDog 		= $('#option2').val();		// Hold answer to option2
              chooseParking 	= $('#option3').val();		// Hold answer to option3
             chooseToilet 	= $('#option4').val();		// Hold answer to option4
             })
            // Step 2 - Filter results
            
                // API OBJECTS PROPERTIES
                // path    -- response[index].property
                // example -- response[0].BIKE_PATH
                // BIKE_PATH
                // DOG_FRIENDLY
                // PARKING
                // RESTROOMS
        
>>>>>>> master
            var beachArray  = [];
            var count = 0;
            var yes = 0, no = 0;

            for (let i = 0; i < response.length; i++) {
                if ((response[i].BIKE_PATH === chooseBike) && 
                    (response[i].DOG_FRIENDLY === chooseDog)&& 
                    (response[i].PARKING === chooseParking)&& 
                    (response[i].RESTROOMS === chooseToilet)){
                    tmpArr[i] = response[i];
                }
            }

            // This will filter the results - Each NameMobileWeb will be unique
            // ======================================================================
            var uniqueNames = [];
            $.each(tmpArr, function(i, el){
                if($.inArray(el, uniqueNames) === -1) uniqueNames.push(el);
            });

            console.log(tmpArr);
            console.log(uniqueNames);
            // ======================================================================
            
             console.log(response);
            
            
            for (let index = 0; index < 9; index++) 
            {
                    // Elements
                    var newDiv          = $('<div class="card">');           
                    var innerDiv        = $('<div class="card-body">');    
                    var newHeading      = $('<h4>');
                        newHeading.text(coastalLocationResponse[index].NameMobileWeb);
                    var newParagraph    = $('<p>');
                        newParagraph.text(coastalLocationResponse[index].DescriptionMobileWeb);
                    var imageDiv        = $('<img class="card-img-top">');
                        imageDiv.attr('src', coastalLocationResponse[index].Photo_1);
                    var goButton        = $('<a class="btn btn-primary" role="button" >');
                    var cleanBtn        = $('<a class="btn btn-success" role="button">');
                    
                    // Add text to buttons
                    goButton.text("Let's Go");
                    cleanBtn.text("CleanUp Info");

                    // Build the inner div
                    innerDiv.append(newHeading);
                    innerDiv.append(newParagraph);
                    innerDiv.append(goButton);
                    innerDiv.append(cleanBtn);
                    innerDiv.prepend(imageDiv);
                    
                    // Append to outer div & add image
                    // newDiv.append(innerDiv);
                    // imageDiv.attr('src', coastalLocationResponse[index].Photo_1);

                    // newHeading.text(coastalLocationResponse[index].NameMobileWeb);
                    // newParagraph.text(coastalLocationResponse[index].DescriptionMobileWeb);
                    // Add to the card-group div
                    newDiv.append(innerDiv);
                    $('.target').append(newDiv);

                    // Add the image to each card
                    // $('.card-body').before(imageDiv);
                    // Add the href to each go button
                    // goButton.attr('href', 'http://www.ebparks.org');
            } // end of for loop
        }) // end of ajax call
    </script>
</body>
</html>